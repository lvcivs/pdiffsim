<html>
	<head>
		<title>sim</title>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
			 <link href='style.css' rel='stylesheet'>
		<script src='speakers_grid.js' type='text/javascript'></script>
	</head>
	<body>
<div id="content">
	<h2>Speaker simulation (grid)</h2>
	<div id="main">
		<form>
		<div id="controls">
			
			<table style="width:100%">
			<tr><td>Grid size: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> Change the size of the grid in which the agents are arranged. The sizes are 20x20 (400 agents), 40x40 (1600 agents) or 80x80 (6400 agents).</span></a> </td>
			<td><input name="gridSize" type="radio" onclick="setGridSize(20)" value="20" autocomplete="off"> 20x20 <input name="gridSize" type="radio" onclick="setGridSize(40)" value="40" checked autocomplete="off"> 40x40 <input name="gridSize" type="radio" onclick="setGridSize(80)" value="80" autocomplete="off"> 80x80 </td></tr>

			<tr><td>Init scenario: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> Choose how the agents are initialized. This controls their initial grammar value, i.e. how likely they are to produce either one of the variants "α" or "β". In the visualization, this will show up as green / red colored agents.</span></a> </td>
			<td><select name="initScenario"  onchange="chooseInitScenario(this.form.initScenario.options[this.form.initScenario.selectedIndex].value)" size="1" autocomplete="off">
      <option value="random" selected>random</option>
      <option value="two fields">two fields</option>
      <option value="island">island</option>
      </select></td></tr>

      <tr><td>Memory limit: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> This parameter regulates how many utterances each agent can keep in his memory. Older items, which are over the limit, are simply discarded ("forgotten") by the agents. Larger values mean that the agents are slower to forget and are therefore slower to adopt innovations. </span></a></td>
      <td> <input id="memorySlider" type="range" min="0" max="100" value="20" oninput="document.querySelector('#memoryOutput').value = value;setMemory(value)" autocomplete="off"></input><output for="memorySlider" id="memoryOutput">20</output></td></tr>
       <tr><td>Lambda value: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> The lambda value controls the adoption rate, i.e. how strongly the agents react to new input. The lambda value is used in the calculation of the agents new grammar, after they exchanged some utterances and adjust their grammar accordingly. Larger values mean that the agents respond more strongly to new input.</span></a></td>
       <td> <input id="lambdaSlider" type="range" min="0" max="1" value="0.5" step="0.1" oninput="document.querySelector('#lambdaSliderOutput').value = value;setLambda(value)" autocomplete="off"></input><output for="lambdaSlider" id="lambdaSliderOutput">0.5</output></td></tr>

       <tr><td>Neighbor range: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> The neighbor range determines the maximum distance between agents when they are paired up to exchange utterances. With a value of 8, the selected neighbor could be at most 8 fields away on the grid (either on the x axis or the y axis, or both). With a value of 1, only direct neighbors will be selected (= 8 neighbors, up, down, left, right and diagonal).</span></a></td>
       <td> <input id="neighborRangeSlider" type="range" min="1" max="8" value="1" step="1" oninput="document.querySelector('#neighborRangeSliderOutput').value = value;setNeighborRange(value)" autocomplete="off"></input><output for="neighborRangeSlider" id="neighborRangeSliderOutput">1</output></td></tr>
      
 			<tr><td>Weighting: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> This option allows to give one of the two variants, in this case "α", some additional weight (either positive or negative). Using the weighting means that the agents will have an inherited bias towards either "α" and "β". The weighting could correspond to a variety of factors in real speaker interaction, e.g. higher prestige, higher efficiency of production, higher communication success rate etc. No weighting corresponds to the "neutral interaction" scenario.</span></a></td>
 			<td> <input name="weighting" type="radio" onclick="setWeighting(value)" value="none" checked autocomplete="off"> none <input name="weighting" type="radio" onclick="setWeighting(value)" value="weighted" autocomplete="off"> weighted</td></tr>
      <tr><td><span id="alphaBiasSpan" class="grayed">Alpha bias:</td>
      <td> <input id="alphaBiasSlider" type="range" min="0.95" max="1.05" value="1" step="0.001" disabled oninput="document.querySelector('#alphaBiasSliderOutput').value = value;setAlphaBias(value)" autocomplete="off"></input><output for="alphaBiasSlider" id="alphaBiasSliderOutput">1</output></span></td></tr>
      <tr><td>Error rate: <a href="#" class="tooltip"><img class="tooltip" src="../circled-i.png" /><span><img class="callout" src="../callout.gif" /> This option controls how likely the hearers are to misunderstand an utterance. In other words, it determines how likely it is that, given that the speaker says "α", but the hearer mistakenly hears "β", and vice versa. This value is by default 0, i.e. there are no misunderstandings.</span></a></td>
      <td> <input id="errorRateSlider" type="range" min="0.000" max="0.010" value="0.000" step="0.001" oninput="document.querySelector('#errorRateOutput').value = value;setErrorRate(value)"  autocomplete="off"></input><output for="errorRateSlider" id="errorRateOutput">0.000</output></td></tr>
    </table>

		</div>
			<input id='initButton' type="button" onclick="initSim()" value="init"></input>
			<input id='stepButton' type="button" onclick="stepSim()" value="step" disabled></input>
			<input id='runStopButton' type="button" onclick="runSim()" value="run/stop" disabled></input><br>
		</form>

		<div>
		<canvas width='160' height='160' id='simCanvas'>Can't see anything? Please upgrade to a browser that supports the canvas tag, e.g. recent versions of <a href="www.getfirefox.com">Firefox</a> or <a href="https://www.google.com/chrome">Google Chrome</a>.</canvas>
		</div>
		<div id="data">
			ticks: <output id="ticks">0</output>
		</div>
		</div><!-- /main -->
		<div id="sidebar">
			<strong>About this simulation</strong><br/>
			<p>In this simulation, the agents are arranged in a 2D grid. Each pixel represents one agent.  The agents are in contact with their nearby neighbors only. The agents each have a memory and a grammar. The grammar is simply a number between 0 and 1, and it determines how likely the agents are to produce either variant "α" or "β" of a linguistic variable (of any kind).</p> 
			<p>When the simulation is started, the agents are paired up randomly with their neighbors. Each pair exchanges some utterances produced according to their individual grammar. The hearers will add the new utterances to their memory and slightly adjust their own grammar according to their recent memory. The grammar of each agent is visualized with the help of colors: Green means high probability to produce "α", while red means high probablity to produce "β".</p>
			<!--p><img src="../formula.png"></p-->
		</div><!-- /main -->
		<div>
		<canvas width='800' height='120' id='plotCanvas'>Can't see anything? Please upgrade to a browser that supports the canvas tag, e.g. recent versions of <a href="www.getfirefox.com">Firefox</a> or <a href="https://www.google.com/chrome">Google Chrome</a>.</canvas>
			<a id="exportLink" href="" onclick="exportLogValues()">export data</a>

			<div>
		</div><!-- /content -->

	</body>
</html>
